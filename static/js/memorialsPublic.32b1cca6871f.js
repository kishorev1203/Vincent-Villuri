"use strict";var eljs;(self.webpackChunkeljs=self.webpackChunkeljs||[]).push([[9731],{348:function(e,t,o){o.r(t),o.d(t,{initAboutPage:function(){return b},initFavorites:function(){return D},initFundraising:function(){return G},initMemorialBelongings:function(){return E},initMemorialCreate:function(){return I},initMemorialDonationPage:function(){return T},initMemorialEvents:function(){return $},initMemorialHelpOut:function(){return Q},initMemorialPublicPages:function(){return ge},initMemories:function(){return ie},initPublicContentEditing:function(){return le},initReportMemorial:function(){return de},initTimeline:function(){return ye}});var n=o(114),r=o.n(n),s=o(9635),i=o.n(s),a=o(0),c=o(8109),l=o(5748),d=o(1432),u=o(2448),m=o(8457),h=o(9095),p=o(458),y=o(7724),g=o(5251),f=o(3285),v=o(4255),S=o(2020),L=o(5189),w=o(2903);function b(){const e=document.querySelector(".public-subscribers");if(e){const t=document.querySelector(".subscriber-content-controls");if(t){const o=t.querySelector(".expand-subscriber-content"),n=t.querySelector(".collapse-subscriber-content");o.addEventListener("click",(()=>{e.querySelectorAll(".below-fold").forEach((e=>{e.classList.remove("d-none")})),o.classList.add("d-none"),n.classList.remove("d-none")})),n.addEventListener("click",(()=>{e.querySelectorAll(".below-fold").forEach((e=>{e.classList.add("d-none")})),o.classList.remove("d-none"),n.classList.add("d-none")}))}}}var q=o(8277);function E(e){if((0,q.r)(),document.querySelectorAll(".belonging").forEach((e=>{const t=e.dataset.belonging,o=document.querySelector(`.modal[data-belonging="${t}"]`);o&&e.addEventListener("click",(()=>{i().getOrCreateInstance(o).show()}))})),e.show){const t=document.querySelector(`.modal[data-belonging="${e.show}"]`);t&&i().getOrCreateInstance(t).show()}}var A=o(9573),k=o(561);function I(e){const{hasSignupForm:t}=e,o=document.getElementById("generate-obituary-create-modal");if(o&&i().getOrCreateInstance(o).show(),(0,A.initMemorialDeceasedForm)(e),t&&(window.initReCAPTCHAs=k.A),e.isPreDeathChecklist){const t=document.querySelectorAll('input[name="pre-death-is-self"]'),o=document.querySelector(`#${e.relationshipSelectId}`),n=document.querySelector(".estate-executor"),r=document.querySelectorAll(`input[name="${e.isExecutorRadioName}"]`),s=document.querySelector(".memorial-deceased-form-container"),i=document.querySelector(".passwordless-signup-container"),a=e=>{const t=document.querySelector(".btn-form-submit button");t&&(t.classList.toggle("disabled",!e),e?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled"))};a(!1);const c=()=>{if(o&&o.selectedOptions.length>0){const t=o.selectedOptions[0];return!e.nonExecutorRelationshipTypes.includes(t.value)}return!1},l=t=>{const l=document.querySelectorAll('[data-for-self="1"]'),d=document.querySelectorAll('[data-for-self="0"]');l.forEach((e=>{e.classList.toggle("d-none",!t)})),d.forEach((e=>{e.classList.toggle("d-none",t)})),t&&r.forEach((e=>{e.checked=!1}));const u=c();n&&n.classList.toggle("d-none",!(!t&&u)),o.value=null;const m=o.selectedOptions.length>0,h=t||m;s.classList.toggle("d-none",!h),i&&i.classList.toggle("d-none",!h),h&&document.querySelector(".for-self-divider").classList.remove("d-none"),a(h);const p=document.getElementById(e.firstNameField),y=document.getElementById(e.lastNameField);if(p&&y&&e.loggedInUserName){const{firstName:o,lastName:n}=e.loggedInUserName;t?p.value||y.value||(p.value=o,y.value=n):p.value===o&&y.value===n&&(p.value="",y.value="")}};if(o.addEventListener("change",(()=>{const e=document.querySelector('input[name="pre-death-is-self"][value="1"]:checked'),t=c();n&&n.classList.toggle("d-none",!(!e&&t)),s.classList.remove("d-none"),i&&i.classList.remove("d-none"),document.querySelector(".for-self-divider").classList.remove("d-none"),a(!0)})),t.forEach((e=>{e.addEventListener("change",(()=>{document.querySelector(".for-self-divider").classList.add("d-none");const t=e.checked&&"1"===e.value;l(t)}))})),r.forEach((e=>{e.addEventListener("change",(()=>{e.checked&&i&&i.classList.remove("d-none")}))})),null!==e.preDeathIsSelf){const t=document.querySelector(`input[name="pre-death-is-self"][value="${e.preDeathIsSelf?"1":"0"}"]`);t&&(t.checked=!0),l(e.preDeathIsSelf)}}const n=document.querySelector(".recently-created-container"),r=document.querySelector(".dismiss-recently-created");n&&r&&r.addEventListener("click",(()=>{n.classList.add("dismissed")}))}var x=o(5858),C=o.n(x),P=o(9241);async function T(e){(0,v.A)();const t=document.querySelector(".success-modal-container-with-link");if(t?(0,L.Xn)(t,12e3):[...document.querySelectorAll(".success-modal-container")].filter((e=>(0,L.zN)(e))).forEach((async e=>{(0,L.Xn)(e,5e3)})),function(e){const t=(0,P.A)(e.charitySearch),o=document.querySelector(".donate-to-searched-charity");t&&t.tomselect.on("change",(()=>{const n=t.tomselect.getValue();n?(o.setAttribute("href",`${e.checkoutPathStub}${n}`),o.classList.remove("d-none")):o.classList.add("d-none")}));const n=document.querySelectorAll(".donor-choice-charity-container"),r=document.querySelectorAll(".donor-choice-charity-overview");n.forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,{charitySlug:o}=t.dataset,s=document.querySelector(`.donor-choice-charity-overview[data-charity-slug="${o}"]`);r.forEach((e=>{e.classList.add("d-none")})),t&&t.classList.contains("selected")?n.forEach((e=>{e.classList.remove("selected")})):(n.forEach((e=>{e.classList.remove("selected")})),t.classList.add("selected"),s.classList.remove("d-none"),(0,d.i)(s.querySelector(".overview-expandable")),(0,L.PA)(t,-100))}))}));const s=document.querySelector(".donor-choice-charities-select select");s&&s.addEventListener("change",(()=>{n.forEach((e=>{e.classList.remove("selected")})),r.forEach((e=>{e.classList.add("d-none")}));const e=s.value;if(!e)return;const t=s.selectedOptions[0].dataset.tagSlug,o=document.querySelector(`.donor-choice-charity-overview[data-charity-slug="${e}"]`);o.classList.remove("d-none"),(0,d.i)(o.querySelector(".overview-expandable")),(0,L.Wl)(window.location.href,"donate page multiple causes",`${t}-learn-more`),(0,L.PA)(o,-120)})),(0,d.A)()}(e),!e.donorChoiceDonationsMode){const e=document.querySelector(".donate-cta-tablet-mobile"),t=[...document.querySelectorAll(".donate-cta")].find(L.zN);if(e&&t){const o=(0,L.DY)(t).top+t.getBoundingClientRect().height,n=()=>{!function(e,t){window.scrollY>=t?e.classList.remove("d-none"):e.classList.add("d-none")}(e,o)};document.addEventListener("scroll",C()(n,16))}}const o=new URLSearchParams(window.location.search).get("scroll-to");if(o){const e=document.querySelector(`#${CSS.escape(o)}`);e&&(0,L.PA)(e)}document.querySelectorAll(".btn-load-more").forEach((t=>{const o=t.nextElementSibling;let n=2;t.addEventListener("click",(async()=>{for(o.classList.add("d-none");o.hasChildNodes();)o.removeChild(o.lastChild);let r;try{const o=await S.A.get(e.getContributionsUrl,{cutoff:t.dataset.timestamp,fundraiser_id:t.dataset.fundraiserId,page:n,past:"true"===t.dataset.past});if(!o.ok)throw new S.o(o);r=await o.json()}catch(e){e.response&&429===e.response.status?o.insertAdjacentHTML("beforeend","<li>You're loading contributions too often. Please try again later.</li>"):(window.Rollbar.error("Error loading contributions",e),o.insertAdjacentHTML("beforeend","<li>We've experienced an error loading contributions. Please reload the page and try again.</li>")),o.classList.remove("d-none")}r&&(r.rendered&&t.insertAdjacentHTML("beforebegin",r.rendered),r.hasNext?n+=1:t.remove())}))}))}var F=o(3706),B=o(5920),N=o(8070);function $(e){(0,N.F)(),function(e){(0,F.T3)(),(0,F.rm)(e)}(e),function(){const e=document.querySelector(".message-memorial-managers"),t=document.querySelector("#modal-message-managers");if(!e||!t)return;const o=new(i())(t);e.addEventListener("click",(()=>{o.show()}));const n=document.querySelector(".message-managers-success-modal"),r=()=>{const e=t.querySelector("form"),n=e.querySelector("#message-managers--textarea"),r=e.querySelector(".message-managers--submit"),s=e.querySelector(".message-managers--cancel");["input","change"].forEach((e=>{n.addEventListener(e,(()=>{n.value?r.disabled=!1:r.disabled=!0}))})),s.addEventListener("click",(()=>{o.hide()}))},s=e=>{t.querySelector("form").querySelector(".error-message").classList.toggle("d-none",!e)};r();let a=!1;document.body.addEventListener("htmx:responseError",(()=>{a=!0,s(!0)})),document.body.addEventListener("htmx:afterRequest",(async()=>{a||(o.hide(),s(!1),n.classList.remove("fadeIn"),await(0,L.bE)(n,"fadeIn"),await(0,L.yy)(5e3),await(0,L.bE)(n,"fadeOut"),n.classList.add("d-none"))})),document.body.addEventListener("htmx:afterSettle",(e=>{"message-managers--form"===e.detail.elt.id&&r()}))}();const t=document.querySelector(".disclaimer span");if(document.querySelectorAll(".attending select").forEach((o=>{const n=()=>{const e=o.closest("form"),n=e.querySelector(".rsvp-details"),r=o.selectedOptions.length?o.selectedOptions[0].value:null,s=!!r&&["attending","attending_virtually"].includes(r);n&&n.classList.toggle("rsvp-details-collapsed",!r);const i=e.querySelector(".rsvp-passwordless-signup");i&&i.classList.toggle("d-none",!r);const a=n.querySelector('input[type="number"]');return a&&a.setAttribute("min",s?"1":"0"),t&&t.classList.toggle("d-none",!s),e.querySelector(".attendees").classList.toggle("rsvp-attendees-collapsed",!s),s};o.addEventListener("change",(()=>{const t=n();(0,L.Wl)(window.location.href,e.rsvpEventCategory,t?e.rsvpEventActionAttending:e.rsvpEventActionNotAttending)})),n()})),document.querySelectorAll(".rsvp-toggle").forEach((e=>{e.addEventListener("click",(()=>{e.classList.toggle("rsvp-expanded"),e.querySelector(".collapsed-img").classList.toggle("d-none"),e.querySelector(".expanded-img").classList.toggle("d-none"),e.closest(".memorial-event").querySelector(".event-metadata").querySelectorAll(":scope > .rsvp").forEach((e=>e.classList.toggle("rsvp-collapsed")))}))})),document.querySelectorAll(".btn-cancel-rsvp").forEach((e=>e.addEventListener("click",(()=>{const t=e.closest("form"),o=e.closest(".memorial-event").querySelector(".rsvp-toggle");o?o.click():(t.querySelectorAll('input[type="radio"]').forEach((e=>{e.checked=!1})),t.querySelector(".attending").classList.remove("el-input-group"),t.querySelector(".rsvp-details").classList.add("rsvp-details-collapsed"),t.querySelector(".attendees").classList.add("rsvp-attendees-collapsed"))})))),""!==window.location.hash){let e;try{e=document.querySelector(`#${CSS.escape(window.location.hash.slice(1))}`)}catch{e=null}e&&[".rsvp-toggle",".collapsed-img",".expanded-img",".event-metadata"].every((t=>e.querySelector(t)))&&(e.querySelector(".rsvp-toggle").classList.toggle("rsvp-expanded"),e.querySelector(".collapsed-img").classList.toggle("d-none"),e.querySelector(".expanded-img").classList.toggle("d-none"),e.querySelector(".event-metadata").querySelectorAll(".rsvp").forEach((e=>{e.classList.remove("rsvp-collapsed")})))}const o=new URLSearchParams(window.location.search).get("scroll-to");if(o){const e=document.querySelector(`#${CSS.escape(o)}`);e&&(0,L.PA)(e)}if(document.querySelectorAll(".event-speech-form").forEach((t=>{const o=t.querySelector(".speech-type-select select"),n=t.querySelector(".speech-type-str");o&&n&&o.addEventListener("change",(()=>{const t=o.selectedOptions[0];n.classList.toggle("d-none",!(t&&t.value===e.SPEECH_TYPE_OTHER))}))})),e.attendeeFormsetProps&&Object.keys(e.attendeeFormsetProps).forEach((t=>{const o=e.attendeeFormsetProps[t];(0,B.R)(t,o)})),e.errorRSVPEventUuid){const t=document.getElementById(e.errorRSVPEventUuid);if(t){const e=t.querySelector(".rsvp-details");e&&e.classList.remove("rsvp-details-collapsed")}}document.querySelectorAll(".event-speaker-speech").forEach((e=>{(0,u.A)(e)})),window.initReCAPTCHAs=k.A}function D(e,t=!1){t?(0,A.initMemorialPrivateFavorites)():function(){const e=new URLSearchParams(window.location.search).get("scroll-to");if(e){const t=document.querySelector(`#${CSS.escape(e)}`);t&&(0,L.PA)(t)}}(),(0,F.rm)(e),(0,F.T3)(),"#favorites"===window.location.hash&&(0,L.PA)(document.querySelector(".favorite"),-40)}var _=o(8250);const R="number",M="percent",O="4",H={[R]:{1:"$1.00",2:"$2.00",3:"$3.00",4:"Other"},[M]:{1:"10%",2:"15%",3:"20%",4:"Other"}},U={[R]:{1:1,2:2,3:3,4:"Other"},[M]:{1:.1,2:.15,3:.2,4:"Other"}};function W(e){let t=M;return e<10&&(t=R),t}function j(e,t,o){const n=Number(e.value);if(""===n||Number.isNaN(n)||n<o)return!0;const r=Number(t.value);return Number.isNaN(r)||r<0}function z(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}function K(e,t,o=!1){if(!e.querySelector("li")||o){const o=document.createElement("li");o.innerHTML=t,e.appendChild(o)}}function Y(e){const t=e.value;e.value=null,e.value=t}function V(e,t,o,n){z(n),o.forEach((e=>{e.innerText=H.percent[e.value]})),Y(t),e.value=""}function J(e,t,o){const n=W(t);let r;o.value!==O&&(r=n===R?U[n][o.value]:U[n][o.value]*t,e.value=`${r.toFixed(2)}`)}function X(){const e=document.querySelector(".total-charge span");e&&(e.innerText="$0.00",e.classList.add("text-note"))}function Z(e,t,o){const n=Number(t.value)+Number(o.value);if(!Number.isNaN(n)&&n>0){const t=document.querySelector(".total-charge span");t&&(t.innerText=`${e} ${n.toFixed(2)}`,t.classList.remove("text-note"))}else X()}async function G(e){let t;if(window.addEventListener("popstate",(e=>{t=e.state,(0,L.$I)(document.querySelector("#donation-checkout-form"),"swapCheckoutStep")})),document.body.addEventListener("pushHistoryState",(e=>{const o=function(e){const t=new URL(e.detail.value);return new URLSearchParams(t.search).toString()}(e);o!==t&&window.history.pushState(o,"")})),e.memorialIsExample)return;e.signupFormPresent&&(window.initReCAPTCHAs=k.A);const o=t=>{(0,N.F)(),e.signupFormPresent&&window.grecaptcha&&(0,k.A)();const o=document.getElementById(e.formFieldIds.anonymous),n=document.getElementById("display-name-checkbox"),r=document.getElementById(e.formFieldIds.displayName),s=document.getElementById(e.formFieldIds.amount),i=document.getElementById(e.formFieldIds.tip),a=document.querySelector(".recent-contribution-warning"),c=document.querySelector(".amount-validation-errors"),l=document.querySelectorAll(".tip-select option"),d=document.querySelector(".tip-select"),u=document.querySelector(".tip-validation-errors");Z(e.currency,s,i);const m=e=>{e.currentTarget===o?o.checked&&(n.checked=!1,r.value=""):e.currentTarget===n&&n.checked&&(o.checked=!1),r.closest(".display-name-container").classList.toggle("d-none",!n.checked),r.disabled=o.checked,r.classList.toggle("disabled",o.checked)};n.checked=n.dataset.defaultDisplayName&&r.value&&r.value!==n.dataset.defaultDisplayName,n.addEventListener("input",m),o.addEventListener("input",m),m({target:null}),e.recentContributionAmount&&["input","paste"].forEach((t=>{s.addEventListener(t,(()=>{a.classList.remove("d-none"),a.innerText=`You recently donated $${e.recentContributionAmount} to this fundraiser. This will be an additional donation.`}))})),t.addEventListener("submit",(()=>{j(s,i,e.minimumDonationAmount)&&((0,L.$I)(t,"cancel-submit-protect"),(0,L.PA)(document.querySelector(".errorlist li"),-120))})),t.addEventListener("htmx:beforeRequest",(t=>{j(s,i,e.minimumDonationAmount)&&t.preventDefault()})),s.addEventListener("input",(()=>{e.recentContributionAmount||z(c),s.value=s.value.replace(/[a-z,]/i,"");const t=Number(s.value);""===s.value||Number.isNaN(t)?(K(c,"Contribution amount must be a number"),V(i,d,l,u),X()):(function(e,t,o){const n=W(e);t.forEach((t=>{const o=H[n][t.value],r=U[n][t.value]*e;t.value!==O&&(t.innerText=n===R?o:`(${o}) ${r.toFixed(2)}`)})),Y(o)}(t,l,d),J(i,t,d),Z(e.currency,s,i))})),s.addEventListener("blur",(()=>{Number(s.value)<e.minimumDonationAmount&&(K(c,`Contribution amount must be at least $${e.minimumDonationAmount}`),V(i,d,l,u),X())})),i.addEventListener("input",(()=>{z(u),i.value=i.value.replace(/[a-z,]/i,"");const t=Number(i.value);if(Number.isNaN(t))K(u,"Tip amount must be zero or a positive number"),X();else if(t<0)K(u,"Tip amount must be zero or a positive number"),X();else{Z(e.currency,s,i);const o=Number(s.value);o>0&&o===t&&K(u,"Just checking: Did you intend to leave a 100% tip for Ever Loved? If so, awesome&mdash;thanks for supporting our website!",!0)}})),i.addEventListener("blur",(()=>{""===i.value&&(i.value="0")}));const h=document.querySelector(".tip-container-inner");d.addEventListener("input",(()=>{z(u);const t=Number(s.value);d.value===O?h.classList.remove("d-none"):Number.isNaN(t)||t<e.minimumDonationAmount?(h.classList.add("d-none"),V(i,d,l,u),X()):(h.classList.add("d-none"),J(i,t,d),Z(e.currency,s,i))})),document.querySelectorAll("input, select").forEach((e=>{e.addEventListener("blur",(e=>{(e.currentTarget.value||"").length>0&&(0,L.Wl)(window.location.href,"donation checkout",e.currentTarget.getAttribute("id"))}))})),(0,L.$I)(d,"input"),s.value&&(0,L.$I)(s,"input")},n=document.querySelector("form#donation-checkout-form");n&&await o(n),document.body.addEventListener("htmx:afterSettle",(e=>{"form"===e.detail.elt.tagName.toLowerCase()&&"donation-checkout-form"===e.detail.elt.id&&o(e.detail.elt)})),await(0,_.A)(e)}function Q(e){const t=document.querySelectorAll(".help-out-need");t&&t.forEach((t=>{const o=t.querySelector(".need-volunteer-button");o&&o.addEventListener("click",(()=>{const o=t.getAttribute("data-need"),n=t.getAttribute("data-need-type"),r=t.getAttribute("data-need-already-volunteered"),s=document.querySelector("#need-volunteer-modal"),a=new(i())(s);s.querySelector('input[name="need"]').value=o;const c=s.querySelector("form"),l=s.querySelector(".personal-share"),d=l.querySelector(".next"),u=s.querySelector(".social-share"),m=s.querySelector(".passwordless-signup-container");[l,u,m].forEach((e=>{e.classList.add("d-none")}));let h=!1;n===e.NEED_TYPE_SHARE_PERSONAL?(h=!0,l.classList.remove("d-none"),l.querySelector(".btn-copy").addEventListener("click",(()=>{d.classList.remove("d-none")})),d.addEventListener("click",(()=>{e.isAuthenticated?r?a.hide():c.requestSubmit():(l.classList.add("d-none"),m.classList.remove("d-none"))}),{once:!0})):n===e.NEED_TYPE_SHARE_SOCIAL_MEDIA?(h=!0,u.classList.remove("d-none"),window.addEventListener("public-facebook-share-complete",(()=>{e.isAuthenticated?r?a.hide():c.requestSubmit():(u.classList.add("d-none"),m.classList.remove("d-none"))}),{once:!0})):e.isAuthenticated||(h=!0,m.classList.remove("d-none")),h?a.show():r?a.hide():c.submit()}))})),window.initReCAPTCHAs=k.A}var ee=o(8647),te=o.n(ee),oe=o(5260),ne=o(4274);class re{constructor(e,t,o,n,r,s){this.availableDeceasedPhotoSlots=s||0,this.formsetPrefix=t,this.userMentionProps=r,this.uploadForm=e,this.input=this.uploadForm.querySelector(".multi-photo-upload-input"),this.groupUUIDInput=this.uploadForm.querySelector('input[name="group_uuid"]'),this.emptyFormsetFormTemplate=o,this.formsetForms=n?Array.from(n):[],this.formsetForms.forEach(((e,t)=>{this.initializeForm(e,t)})),this.addPhotosButton=this.uploadForm.querySelector(".add-photo-memory-button"),this.initialFormCountInput=this.uploadForm.querySelector(`#${this.formsetPrefix}-INITIAL_FORMS`),this.totalFormsInput=this.uploadForm.querySelector(`#${this.formsetPrefix}-TOTAL_FORMS`),this.addPhotosButton.addEventListener("click",(()=>{this.input.click()})),this.input.addEventListener("change",(()=>{this.uploadPhotos()})),this.loadingDialog=this.uploadForm.querySelector(".overlay.loading"),this.errorDialog=this.uploadForm.querySelector(".overlay.error"),this.progressBar=this.loadingDialog.querySelector(".el-progress > *")}show(){this.formsetForms.length?this.input.classList.add("d-none"):this.input.click()}initializeForm(e,t,o=!1){const n={participantsInputIds:{participants:`${this.formsetPrefix}-${t}-participants`,participantsJson:`${this.formsetPrefix}-${t}-participants_json`},userMention:this.userMentionProps};(0,ne.A)(n);const r=t>0?this.formsetForms[t-1].querySelector(".photo-memory-form-fields"):null,s=e.querySelector(".photo-memory-form-fields"),i=s.querySelector(".year"),a=i.querySelector('input[type="text"]');a.addEventListener("input",(()=>{this.updateCopyButtons()}));const c=s.querySelector(".location"),l=c.querySelector('input[type="text"]'),d=c.querySelector('input[type="hidden"]');l.addEventListener("input",(()=>{this.updateCopyButtons()}));const u=s.querySelector(".caption"),m=u.querySelector('input[type="text"]');if(m.addEventListener("input",(()=>{this.updateCopyButtons()})),r){const e=r.querySelector(".year").querySelector('input[type="text"]');i.querySelector(".copy-photo-memory-detail").addEventListener("click",(()=>{a.value=e.value,this.updateCopyButtons()}));const t=r.querySelector(".location"),o=t.querySelector('input[type="text"]'),n=t.querySelector('input[type="hidden"]');c.querySelector(".copy-photo-memory-detail").addEventListener("click",(()=>{l.value=o.value,d.value=n.value,this.updateCopyButtons()}));const s=r.querySelector(".caption").querySelector('input[type="text"]');u.querySelector(".copy-photo-memory-detail").addEventListener("click",(()=>{m.value=s.value,this.updateCopyButtons()}))}this.updateCopyButtons();const h=e.querySelector(".remove-photo-memory-button"),p=e.querySelector(`input[name="remove-photo-memory-${t}"]`);h&&p&&h.addEventListener("click",(()=>{e.classList.add("removing"),p.value="1",1===this.formsetForms.length&&document.querySelector(".save-memory-photo-formset-btn").click()}));const y=e.querySelector(".promote-to-header");if(y){const e=y.querySelector('input[type="checkbox"]');o&&document.querySelectorAll('.promote-to-header input[type="checkbox"]:checked').length<this.availableDeceasedPhotoSlots&&(e.checked=!0);const t=()=>{const e=document.querySelectorAll('.promote-to-header input[type="checkbox"]:checked').length>=this.availableDeceasedPhotoSlots;document.querySelectorAll(".promote-to-header").forEach((t=>{const o=t.querySelector('input[type="checkbox"]');t.classList.toggle("d-none",!!e&&!o.checked)}))};e.addEventListener("change",t),t()}(0,oe.A)({element:document.getElementById(`${this.formsetPrefix}-${t}-location`),metadataElement:document.getElementById(`${this.formsetPrefix}-${t}-location_metadata`),options:{types:["establishment","geocode"]}})}addForm(e,t,o=!1){const n=this.formsetForms.length,r=document.createElement("div");r.innerHTML=this.emptyFormsetFormTemplate.replace(/__prefix__/g,n);const s=r.querySelector(".photo-memory-form");if(s){this.totalFormsInput.value=n+1,this.initialFormCountInput.value=n+1,this.formsetForms.push(s),this.uploadForm.querySelector(".photo-memory-forms-container").insertBefore(s,this.addPhotosButton);const r=document.getElementById(`${this.formsetPrefix}-${n}-id`),i=document.getElementById(`${this.formsetPrefix}-${n}-memory_type`),a=document.getElementById(`${this.formsetPrefix}-${n}-caption`),c=s.querySelector(".photo-memory-form-photo"),l=c.querySelector("img.memory-photo");r.setAttribute("value",e),i.setAttribute("value","0"),c.style.backgroundImage=`url(${t})`,l.setAttribute("src",t),a.setAttribute("placeholder","Example: A trip to the park");const{memorialSlug:d,userMentionClass:u,userSearchEndpoint:m}=this.userMentionProps,h=s.querySelector(`.${u}`);new g.Tp(h,d,m).setUp(),this.initializeForm(s,n,o)}}async ingestPhotos(e){this.errorDialog.classList.add("d-none"),this.loadingDialog.classList.remove("d-none"),this.addPhotosButton.classList.add("d-none");const t=setInterval((()=>{if(this.loadingDialog.classList.contains("d-none")||!this.progressBar)return void clearInterval(t);const e=parseInt(this.progressBar.value,10);e<100?this.progressBar.value=e+1:clearInterval(t)}),20);try{const t=new FormData;e.forEach((e=>t.append("url",e)));const o=await S.A.post(this.uploadForm.dataset.uploadAction,t);if(!o.ok)throw new S.o(o);const n=await o.json();this.receiveNewPhotoMemories(n)}catch(e){window.Rollbar.warn("Error uploading memory-multi-photos",e),this.errorDialog.classList.remove("d-none")}this.loadingDialog.classList.add("d-none"),this.input.value=null}async uploadPhotos(){const e=new FormData(this.uploadForm);this.errorDialog.classList.add("d-none"),this.loadingDialog.classList.remove("d-none"),this.addPhotosButton.classList.add("d-none");const{progressBar:t,loadingDialog:o}=this,n=this.input.files.length,r=e=>{if(t.value=50*e,e>=100){const e=setInterval((()=>{if(o.classList.contains("d-none")||!t)return void clearInterval(e);const n=parseInt(t.value,10);n<100?t.value=n+1:clearInterval(e)}),40*n)}};let s;try{s=await(0,w.UK)(this.uploadForm.dataset.uploadAction,e,r),this.receiveNewPhotoMemories(s)}catch(e){window.Rollbar.error("Error uploading multi-Memory-photos",e),this.errorDialog.classList.remove("d-none")}this.loadingDialog.classList.add("d-none"),this.addPhotosButton.classList.remove("d-none"),this.input.value=null}receiveNewPhotoMemories(e){const t=(e.photoMemories||[]).length+this.formsetForms.length<=this.availableDeceasedPhotoSlots;(e.photoMemories||[]).forEach((e=>{this.addForm(e.id,e.url,t)})),this.groupUUIDInput.value=e.groupUUID,this.uploadForm.querySelector(".alert").classList.remove("d-none"),(0,L.PA)(this.uploadForm);const o=document.querySelector(".memory-selectors");o&&o.classList.add("d-none")}updateCopyButtons(){this.formsetForms.forEach(((e,t,o)=>{const n=t>0?o[t-1]:null,r=e.querySelector(".photo-memory-form-fields > .year"),s=r.querySelector('input[type="text"]'),i=r.querySelector(".copy-photo-memory-detail");if(i.classList.toggle("d-none",!n),n){const e=n.querySelector('.photo-memory-form-fields > .year > input[type="text"]');i.classList.toggle("d-none",s.value&&!e.value.startsWith(s.value)||e.value===s.value)}const a=e.querySelector(".photo-memory-form-fields > .location"),c=a.querySelector('input[type="text"]'),l=a.querySelector(".copy-photo-memory-detail");if(l.classList.toggle("d-none",!n),n){const e=n.querySelector('.photo-memory-form-fields > .location > input[type="text"]');l.classList.toggle("d-none",c.value&&!e.value.startsWith(c.value)||e.value===c.value)}const d=e.querySelector(".photo-memory-form-fields > .caption"),u=d.querySelector('input[type="text"]'),m=d.querySelector(".copy-photo-memory-detail");if(m.classList.toggle("d-none",!n),n){const e=n.querySelector('.photo-memory-form-fields > .caption > input[type="text"]');m.classList.toggle("d-none",u.value&&!e.value.startsWith(u.value)||e.value===u.value)}}))}}var se=o(7316);function ie(e){const t=document.querySelector(".add-memory-details"),o=document.querySelector(".memory-form"),n=document.querySelector(".multi-photo-uploader"),r=document.querySelector(".btn-submit-memory"),s=document.querySelector(".btn-cancel-memory-edit"),a=document.querySelector(".caption-input"),c=document.querySelector(".location-input"),d=document.querySelectorAll(".memory-selector"),u=document.querySelector(".medium-editor-textarea"),m=document.getElementById("id_memory-memory_type"),h=document.querySelector(".participants-input"),p=document.getElementById("id_memory-photo"),y=document.querySelector(".photo-input"),g=document.querySelector(".text-input"),f=document.querySelectorAll(".text-input-label"),v=document.querySelector(".year-input"),w=document.querySelector(".video-input"),b=document.getElementById("id_memory-video_url"),q=document.querySelector(".photo-ingestion-modal"),E=document.querySelector(".condolence-templates-container");let I,x;q&&(I=i().getOrCreateInstance(q)),p&&p.addEventListener("change",(()=>{(0,L.TT)(p)})),e.memoryPostingNotAllowed||(n?x=new re(n.querySelector("form"),e.photoMemoryFormsetIdPrefix,e.emptyPhotoMemoryForm,Array.from(document.querySelectorAll(".photo-memory-form")),e.userMention,e.availableDeceasedPhotoSlots):(0,ne.A)(e));const C=()=>{e.editing?r.innerText="Save changes":e.postDonation?(r.innerText="Share",s.innerText="Skip"):r.innerText="Post photo",a.classList.remove("d-none"),c.classList.remove("d-none"),y.classList.remove("d-none"),h.classList.remove("d-none"),g.classList.add("d-none"),v.classList.remove("d-none"),w.classList.add("d-none"),b.disabled=!0,f.forEach((e=>{e.innerText="Caption"})),m.value=e.memoryTypePhoto,E&&E.classList.add("d-none"),g.querySelector("textarea").setAttribute("placeholder","")},P=()=>{e.emptyPhotoMemoryForm&&n&&(o.classList.add("d-none"),n.classList.remove("d-none"))},T=()=>{q?(void 0===window.FB&&q.querySelector(".ingestion-option.facebook").classList.add("d-none"),I.show(),P()):x?(x.show(),P()):document.getElementById("id_memory-photo").click()},B=()=>{e.editing?r.innerText="Save changes":e.postDonation?(r.innerText="Share",s.innerText="Skip"):r.innerText="Post story",a.classList.add("d-none"),c.classList.remove("d-none"),y.classList.add("d-none"),h.classList.add("d-none"),g.classList.remove("d-none"),v.classList.remove("d-none"),w.classList.add("d-none"),b.disabled=!0,f.forEach((t=>{t.innerText=`Story about ${e.deceasedFirstName}`})),m.value=e.memoryTypeStory,E&&E.classList.add("d-none"),g.querySelector("textarea").setAttribute("placeholder","")},$=()=>{e.editing?r.innerText="Save changes":e.postDonation?(r.innerText="Share",s.innerText="Skip"):r.innerText="Post condolence",a.classList.add("d-none"),c.classList.add("d-none"),y.classList.add("d-none"),h.classList.add("d-none"),g.classList.remove("d-none"),v.classList.add("d-none"),w.classList.add("d-none"),b.disabled=!0,f.forEach((e=>{e.innerText="Your condolence"})),m.value=e.memoryTypeCondolence,E&&E.classList.remove("d-none"),g.querySelector("textarea").setAttribute("placeholder","")},D=()=>{e.editing?r.innerText="Save changes":e.postDonation?(r.innerText="Share",s.innerText="Skip"):r.innerText="Post video",a.classList.add("d-none"),c.classList.add("d-none"),y.classList.add("d-none"),h.classList.add("d-none"),g.classList.remove("d-none"),v.classList.add("d-none"),w.classList.remove("d-none"),b.disabled=!1,f.forEach((e=>{e.innerText="Video description"})),m.value=e.memoryTypeVideo,E&&E.classList.add("d-none"),g.querySelector("textarea").setAttribute("placeholder",`Ex. The video from ${e.deceasedFirstName}'s memorial service`)},_=e=>{d.forEach((t=>{e!==t?(t.classList.remove("selected"),t.classList.add("unselected"),t.querySelector("img.unselected").classList.remove("d-none"),t.querySelector("img.selected").classList.add("d-none")):(t.classList.add("selected"),t.classList.remove("unselected"),t.querySelector("img.unselected").classList.add("d-none"),t.querySelector("img.selected").classList.remove("d-none"))}))},R=document.querySelector(".passwordless-signup-container");if(R){const e=te().getOrCreateInstance(R,{toggle:!1});R.querySelectorAll("input").forEach((t=>{t.addEventListener("invalid",(()=>{e.show()}))})),[b,p,u].forEach((t=>{t&&t.addEventListener("input",(()=>{t.value&&e.show()}))}))}if(["click","touchstart"].forEach((r=>d.forEach((s=>s.addEventListener(r,(r=>{r.stopPropagation(),t.classList.remove("d-none"),o.classList.remove("d-none"),e.emptyPhotoMemoryForm&&n&&n.classList.add("d-none"),s.classList.contains("share-photo")?e.memorialIsExample?i().getOrCreateInstance("#modal-example").show():(C(),T(),e.editing?(0,L.Wl)(window.location.href,"memory","edit-change-type-to-photo"):(0,L.Wl)(window.location.href,"memory","select-photo")):s.classList.contains("tell-story")?(B(),e.editing?(0,L.Wl)(window.location.href,"memory","edit-change-type-to-story"):(0,L.Wl)(window.location.href,"memory","select-story")):s.classList.contains("share-video")?(D(),e.editing?(0,L.Wl)(window.location.href,"memory","edit-change-type-to-video"):(0,L.Wl)(window.location.href,"memory","select-video")):($(),e.editing?(0,L.Wl)(window.location.href,"memory","edit-change-type-to-condolence"):(0,L.Wl)(window.location.href,"memory","select-condolence")),_(s)})))))),s&&s.addEventListener("click",(n=>{e.editing||e.postDonation||(t.classList.add("d-none"),o.reset(),d.forEach((e=>{e.classList.remove("selected"),e.classList.add("unselected"),e.querySelector("img.unselected").classList.remove("d-none"),e.querySelector("img.selected").classList.add("d-none")})),n.preventDefault())})),(()=>{if(!t)return;const o=new URLSearchParams(window.location.search).get("share-memory");let n;if(void 0!==e.memoryType)n=e.memoryType;else{if(void 0===o)return;n=o}n=parseInt(n,10),t.classList.remove("d-none");let r=document.querySelector(".give-condolences");n===e.memoryTypePhoto?(C(),T(),r=document.querySelector(".share-photo")):n===e.memoryTypeStory?(B(),r=document.querySelector(".tell-story")):n===e.memoryTypeVideo?(D(),r=document.querySelector(".share-video")):$(),_(r)})(),(0,F.T3)(),(0,F.rm)(e),-1!==window.location.search.indexOf("memory-heart-added")){let e;try{e=document.querySelector(`#${CSS.escape(window.location.hash.slice(1))}`)}catch{e=null}if(e){const t=e.querySelector(".memory-heart-toggle img");t&&(0,L.bE)(t,"pulse")}}const M=(e,t)=>{t.querySelectorAll(".user-heart").forEach((e=>{e.remove()}));const o=t.querySelector(".empty-template"),n=t.querySelector(".memory-heart-user-list-column:first-child"),r=t.querySelector(".memory-heart-user-list-column:last-child"),s=[],i=[],a=Math.ceil(e.length/2);e.forEach(((e,t)=>{const n=o.cloneNode(!0);n.querySelector("span").innerText=e,n.classList.remove("d-none"),n.classList.add("user-heart"),n.classList.remove("empty-template"),t+1<=a?s.push(n):i.push(n)})),s.forEach((e=>{n.appendChild(e)})),i.forEach((e=>{r.appendChild(e)}))},O=e=>{const t=e.querySelector(".memory-heart-toggle"),o=e.querySelector(".memory-reactions"),n=e.querySelector(".heart-count"),r=e.querySelector(".collapser"),s=e.querySelector(".memory-heart-users"),i=r?te().getOrCreateInstance(s,{toggle:!1}):null,a=e.querySelector(".memory-pin-toggle"),c=e.querySelector(".comment-button"),l=e.querySelector("textarea.answer-text");if(t){const e=t.dataset.toggleUrl,r=t.querySelector("img:first-child");t.addEventListener("click",(async()=>{let a;try{const t=await S.A.post(e);if(!t.ok)throw new S.o(t);a=await t.json()}catch(e){window.Rollbar.warn("Error hearting a memory",e)}a&&(t.querySelectorAll("img").forEach((e=>{e.classList.toggle("d-none")})),a.heart_count>0?(n.innerText=`${a.heart_count}`,n.classList.remove("d-none"),n.parentElement.classList.add("heart-or-comment-counter-visible")):(n.innerText="",n.classList.add("d-none"),o.querySelector(".comment-count")||n.parentElement.classList.remove("heart-or-comment-counter-visible")),a.is_active?((0,L.bE)(r,"pulse"),M(a.user_names,s),(0,L.Wl)(window.location.href,"memory","click-memory-heart-on")):(M(a.user_names,s),(0,L.Wl)(window.location.href,"memory","click-memory-heart-off"),o.querySelectorAll(".memory-heart-user-list-column .user-heart").length||i&&i.hide()))}))}s&&(s.addEventListener("shown.bs.collapse",(()=>{(0,L.Wl)(window.location.href,"memory","click-memory-open-heart-list")})),s.addEventListener("hidden.bs.collapse",(()=>{(0,L.Wl)(window.location.href,"memory","click-memory-close-heart-list")})));const d=()=>{i&&i.toggle()};if(n&&n.addEventListener("click",d),r&&r.addEventListener("click",d),a){const e=a.dataset.togglePinUrl;e&&a.addEventListener("click",(async()=>{try{const t=await S.A.post(e);if(!t.ok)throw new Response(t);const o=await t.json();window.location=o.nextUrl}catch(e){window.Rollbar.warn("Error toggling pinned status of memory",e)}}))}c&&l&&(c.addEventListener("click",(()=>{l.focus(),(0,L.Wl)(window.location.href,"memory","click-memory-comment-icon")})),l.addEventListener("focus",(()=>{(0,L.Wl)(window.location.href,"memory","click-memory-comment-field")})))};if(document.querySelectorAll(".memory").forEach(O),document.body.addEventListener("htmx:afterSettle",(t=>{const o=t.detail.elt;if(o&&o.classList.contains("memory")){O(o),(0,F.KZ)(o,e);const t=o.querySelector(".user-post-form");t&&(0,F.M1)(t),o.querySelectorAll(".toggle-dropdown-edit-menu").forEach((e=>{(0,l.Y)(e)}))}})),![...document.querySelectorAll(".errorlist")].find(L.zN)){const t=new URLSearchParams(window.location.search),o=t.get("flow"),n=t.get("scroll-to");if(n){const e=document.querySelector(`#${CSS.escape(n)}`);if(e){let t=-104;const o=document.querySelector(".secondary-nav-public");o&&(t-=o.offsetHeight),(0,L.PA)(e,t)}}else(e.editing||e.presetMemoryTypeProvided&&"201"!==o&&!document.querySelectorAll(".messages-container .alert").length)&&(0,L.PA)(document.querySelector(".memorial-detail-section"),20)}if(e.memoryPostingNotAllowed||(0,oe.A)({element:document.getElementById("id_memory-location"),metadataElement:document.getElementById("id_memory-location_metadata"),options:{types:["establishment","geocode"]}}),q){const e=document.querySelector(".social-photo-importer"),t=new se.k(e,(e=>{P(),x.ingestPhotos(e)})),o=q.querySelector(".ingestion-option.upload");o&&o.addEventListener("click",(()=>{I.hide(),C(),x?(x.show(),P()):p.length&&p.click()}));const n=q.querySelector(".ingestion-option.facebook");n&&n.addEventListener("click",(()=>{I.hide(),t.show(se.b.FACEBOOK)}))}window.initReCAPTCHAs=k.A,(0,N.F)(),(0,L.pf)(),(0,A.initPhotoArchiveRequest)()}var ae=o(1435);function ce(e,t){e.querySelectorAll(".editable-content-form input,select").forEach((e=>{t.contains(e)||(e.required=!1)}))}function le(e){const t=document.querySelector(".edit-content-modal");if(!t)return;const o=new(i())(t);if(e.showContentEditModal){o.show();const e=t.querySelector(".editable-content-form:not(.d-none)");ce(t,e)}const n=t.querySelector(".location-field");n&&(0,oe.A)({element:n.querySelector('input[type="text"]'),options:{types:["(cities)"]}}),t.querySelector('.editable-content-form[data-content-type="cause_of_death"]')&&(0,ae.A)({...e.causeOfDeathSearch});const r=t.querySelector('.editable-content-form[data-content-type="final_resting_place"]');if(r){const t=r.querySelector(".remains-location-type-container select"),o=r.querySelector(".cemetery-search"),n=r.querySelector(".remains-location");if(t&&t.addEventListener("change",(()=>{const e=t.selectedOptions[0];e&&e.value&&("1"===e.value?(o.classList.remove("d-none"),n.classList.add("d-none")):(o.classList.add("d-none"),n.classList.remove("d-none")))})),o&&e.cemeterySearch&&(0,P.A)(e.cemeterySearch),n){const e=n.querySelector('input[type="text"]'),t=n.querySelector('input[type="hidden"]');(0,oe.A)({element:document.getElementById(e.id),metadataElement:document.getElementById(t.id),options:{types:["establishment","geocode"]}})}}document.querySelectorAll(".add-content").forEach((e=>{"javascript:;"===e.href&&e.addEventListener("click",(()=>{const n=e.getAttribute("data-content-type"),r=t.querySelector(`.editable-content-form[data-content-type="${n}"]`);if(r){if(t.querySelector('input[name="_submit_editable_content"]').value=n,ce(t,r),r.classList.remove("d-none"),"location"===n||"final_resting_place"===n){const e=r.querySelector(".pac-target-input");e&&e.setAttribute("placeholder","");const t=document.querySelector(".pac-container");t&&(t.style.zIndex=2500)}o.show()}}))})),t.addEventListener("hidden.bs.modal",(()=>{window.Beacon&&window.Beacon("config",{hideFABOnMobile:!1}),t.querySelectorAll(".editable-content-form").forEach((e=>{e.classList.add("d-none")}))})),t.addEventListener("shown.bs.modal",(()=>{window.Beacon&&window.Beacon("config",{hideFABOnMobile:!0})})),window.initReCAPTCHAs=k.A}function de(e){const t=document.querySelector(".btn-form-submit button"),o=document.querySelectorAll(`[name="${e.reasonRadiosName}"]`),n=document.querySelectorAll("[data-show-when-checked]"),r=document.getElementById("inaccurateModal"),s=document.getElementById("familyModal");if(s){const l=s.querySelectorAll('[name="family-reasons"]'),d=document.querySelectorAll("[data-family-show-when-checked]");function u(){d.forEach((e=>{e.classList.add("d-none")}))}l.forEach((e=>{e.addEventListener("change",(()=>{u(),document.querySelector(`[data-family-show-when-checked="${e.value}"]`).classList.toggle("d-none",!e.checked)}))})),s.addEventListener("hidden.bs.modal",(()=>{l.forEach((e=>{e.checked=!1})),u()}))}function a(e,o,n){e.isUsingPersonalFundraising||o.value!==e.ReportReason.FRAUDULENT.toString()||(t.disabled=!0),r&&o.value===e.ReportReason.INACCURATE.toString()&&i().getOrCreateInstance(r).show(),r&&o.value===e.ReportReason.FAMILY.toString()&&i().getOrCreateInstance(s).show(),n&&n.classList.toggle("d-none",!o.checked)}o.forEach((o=>{o.addEventListener("change",(()=>{t.disabled=!1,n.forEach((e=>{e.classList.add("d-none")})),a(e,o,document.querySelector(`[data-show-when-checked="${o.id}"]`))}))}));const c=document.querySelector(`[name="${e.reasonRadiosName}"]:checked`);c&&a(e,c,document.querySelector(`[data-show-when-checked="${c.id}"]`)),window.initReCAPTCHAs=k.A}var ue=o(7479),me=o.n(ue),he=o(5550),pe=o.n(he);function ye(e){let t;if(t=e.isPrivate&&!e.isOnboarding?document.querySelector(".private-content-container"):document.body,me().getOrCreateInstance(t,{rootMargin:"-10% 0px -70%",smoothScroll:!0,target:"#timeline-nav",threshold:[0]}),e.formFieldIds&&Object.keys(e.formFieldIds).length>0){const t=t=>{const o=document.querySelector(".milestone-form-details");if(t){o.classList.remove("d-none");const n=document.querySelector(".milestone-other");"OTHER"===t?n.classList.remove("d-none"):(n.classList.add("d-none"),n.value="");const r=document.querySelector(".milestone-extra-data"),s=r.querySelector(".dark-gray-label"),i=document.getElementById(e.formFieldIds.milestoneExtraData),a=e.milestoneTypesRequiringExtraData[t];if(a){const[e,,t]=a;r.classList.remove("d-none"),s.innerText=e,i.setAttribute("placeholder",t)}else r.classList.add("d-none"),i.value="";const c=e.milestoneTypesUsingPersons.includes(t),l=document.querySelector(".milestone-person");c?(l.classList.remove("d-none"),l.querySelector(".person-label").innerText=e.milestonePersonLabels[t]):l.classList.add("d-none"),document.querySelector(".milestone-location > .location-label").innerText=e.milestoneLocationLabels[t]||"Location"}else o.classList.add("d-none")},o=document.getElementById(e.formFieldIds.milestoneDateOccurred.replace("month","year")),n=document.getElementById(e.formFieldIds.milestoneYearOccurred);o.required=!0,n.value&&(o.value=n.value),o.addEventListener("change",(()=>{n.value=o.selectedOptions[0].value,n.value&&(o.required=!1)}));const r=document.querySelector(".add-milestone-form");r&&r.addEventListener("submit",(()=>{const t=document.getElementById(e.formFieldIds.milestoneDateOccurred.replace("month","day")),r=document.getElementById(e.formFieldIds.milestoneDateOccurred);t.value&&r.value||(o.selectedOptions[0].value&&(n.value=o.selectedOptions[0].value),o.setAttribute("disabled","disabled"),t.setAttribute("disabled","disabled"),r.setAttribute("disabled","disabled"))}));const s=document.getElementById(e.formFieldIds.milestoneType);s&&(t(s.selectedOptions[0].value),s.addEventListener("change",(()=>{const e=s.selectedOptions[0].value;t(e)})));const i=document.getElementById(e.formFieldIds.person),a=document.querySelector(".clear-person-selection"),c={sortField:[{field:"$order"},{field:"$score"}],create:e=>{const t=e.trim();return""===t?null:{value:"NEW",text:`${t} (add new relation)`,created:!0}},maxItems:1,placeholder:"Select a related person"},l=new(pe())(i,c);a.addEventListener("click",(()=>{l.clear(),a.classList.add("d-none")})),l.on("change",(t=>{if(!t)return;const o=l.options[t];if(o&&"NEW"===o.value){document.querySelector(".milestone-person-select").classList.add("d-none");const t=o.text.replace(" (add new relation)","").split(" ");let[n,r]=["",""];2===t.length?[n,r]=t:1===t.length?[n]=t:([n]=t,r=t.slice(1).join(" "));const s=document.querySelector(".milestone-person-create");s.classList.remove("d-none"),s.querySelector(".survivor-form").querySelectorAll("input,select").forEach((e=>{e.removeAttribute("disabled")})),document.getElementById(e.formFieldIds.creatingPerson).value=1;const i=document.getElementById(e.formFieldIds.survivorFirstName),a=document.getElementById(e.formFieldIds.survivorLastName);i.value=n,a.value=r;const c=document.getElementById(e.formFieldIds.predeceasedFirstName),d=document.getElementById(e.formFieldIds.predeceasedLastName);c.value=n,d.value=r,l.clear()}}));const d=document.getElementById(e.formFieldIds.survivorRelationshipTypeFieldId),u=document.querySelector(".create-survivor-relationship-other");d&&u&&d.addEventListener("change",(e=>{const t=e.target.selectedIndex;"other"===e.target.options[t].value?u.classList.remove("d-none"):(u.querySelector("input").value="",u.classList.add("d-none"))}));const m=document.getElementById(e.formFieldIds.predeceasedRelationshipTypeFieldId),h=document.querySelector(".create-predeceased-relationship-other");m&&h&&m.addEventListener("change",(e=>{const t=e.target.selectedIndex;"other"===e.target.options[t].value?h.classList.remove("d-none"):(h.querySelector("input").value="",u.classList.add("d-none"))})),document.querySelectorAll(".create-person-tab").forEach((e=>{e.addEventListener("hidden.bs.tab",(e=>{const t=document.querySelector(e.target.dataset.bsTarget);t.querySelectorAll("input").forEach((e=>{e.value=""})),t.querySelectorAll("input,select").forEach((e=>{e.setAttribute("disabled","disabled")}))})),e.addEventListener("shown.bs.tab",(e=>{document.querySelector(e.target.dataset.bsTarget).querySelectorAll("input,select").forEach((e=>{e.removeAttribute("disabled")}))}))}));const p=document.getElementById(e.formFieldIds.milestoneLocation),y=document.getElementById(e.formFieldIds.milestoneLocationMetadata);p&&y&&(0,oe.A)({element:p,metadataElement:y,options:{types:["establishment","geocode"]}});const g=document.querySelector(".predeceased-location-container");g&&(0,oe.A)({element:g.querySelector("input"),options:{types:["(cities)"]}})}if(e.blockUserPromptData&&window.showBlockUserModal){const t=window.location.toString();t.indexOf("?")>0&&window.history.replaceState({},document.title,t.substring(0,t.indexOf("?"))),window.showBlockUserModal(e.blockUserPromptData.userSlug,e.blockUserPromptData.userName)}}function ge(e){let t;e.memorialIsExample&&(t=new(i())("#modal-example"),document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",(o=>{o.stopImmediatePropagation(),o.preventDefault(),(0,L.$I)(e,"cancel-submit-protect"),t.show()}))})),document.querySelectorAll(".show-example-modal").forEach((e=>{e.addEventListener("click",(e=>{e.stopImmediatePropagation(),e.preventDefault(),t.show()}))})),document.querySelectorAll("a").forEach((e=>{e.addEventListener("click",(o=>{e.href.includes("example-user")&&(o.stopImmediatePropagation(),o.preventDefault(),t.show())}))}))),e.userMention&&(0,g.dH)(e),function(){const e=document.querySelector(".photo-header-slides-container");if(!e)return;const t=new c.Ay(e.querySelector(".glide"),{animationDuration:600,peek:{before:20,after:20},type:"carousel"}),o=e.querySelector(".edit-photo"),n=e.querySelectorAll(".glide__slide");t.on("run",(()=>{const e=n[t.index];e&&o&&(e.querySelector(".cta-slide")?o.classList.add("d-none"):o.classList.remove("d-none"))})),t.mount({Swipe:c.Hp})}();const o=document.getElementById("memorial-republish-submit");o&&o.addEventListener("click",(()=>{document.getElementById("memorial-republish-form").submit()})),(0,d.A)(),document.querySelectorAll(".mini-content-object").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.objectUrl;t&&(window.location.href=t)}))}));const n=document.querySelector(".subscription-success");n&&(0,L.PA)(n,-20);const s=new URLSearchParams(window.location.search);if(s.get("subscription-list-success")){const e=document.querySelector(".user-public-subscriber");e&&(0,L.PA)(e,-20)}const b=document.querySelector(".nav-tab-container .navigation-container");b&&new f.x(b),window.fbAsyncInit=()=>{window.FB.init({appId:a.A.facebookAppId,autoLogAppEvents:!0,xfbml:!0,version:a.A.facebookApiVersion}),document.querySelectorAll(".btn-facebook-share").forEach((o=>{o.addEventListener("click",(o=>{if(e.memorialIsExample)return void t.show();const n=o.currentTarget.getAttribute("data-facebook-share-url")||e.sharingUrl;a.A.debug&&console.log(`Would share the following link to Facebook: ${n}`),window.FB.ui({method:"share",href:n},(e=>{e&&!e.error_code&&void 0!==e&&(0,L.$I)(window,"public-facebook-share-complete")}))}))}))},(0,p.A)(".share-cta-container .btn-native-share"),(0,p.A)(".sharing-cta-sticky-container .btn-native-share"),(0,p.A)("#social-native-share-post-photo-header"),(0,p.A)("#social-native-share-pre-photo-header"),(0,p.A)("#mobile-slide-native-share"),(0,p.A)(".share-obituary-section .btn-native-share"),(0,L.ZT)(),(0,l.D)(),document.querySelectorAll(".memorial-social-module").forEach((e=>{const t=e.querySelector(".heart-toggle");if(!t)return;const o=t.querySelector("span"),n=t.querySelector("img:first-of-type");window.location.search.includes("heart-added")&&(0,L.bE)(n,"pulse"),t.addEventListener("click",(async()=>{let e;try{const o=await S.A.post(t.dataset.toggleUrl);if(!o.ok)throw new S.o(o);e=await o.json()}catch(e){return void window.Rollbar.error("Error hearting a memorial",e)}t.querySelectorAll("img").forEach((e=>e.classList.toggle("d-none"))),e.heart_count?o.innerText=`Heart (${e.heart_count})`:o.innerText="Heart",e.is_active?((0,L.bE)(n,"pulse"),(0,L.Wl)(window.location.href,"memorial ctas","click-memorial-heart-on")):(0,L.Wl)(window.location.href,"memorial ctas","click-memorial-heart-off")}))})),(0,v.A)();const q=document.getElementById("modal-block-user");if(q){const t=new(i())(q);window.showBlockUserModal=(e,o)=>{q.dataset.userToBlock=e,q.querySelectorAll(".user-to-block-name").forEach((e=>{e.innerText=o})),t.show()},q.querySelectorAll(".block-user-button").forEach((o=>{o.addEventListener("click",(async()=>{const n=(0,L.SE)(o);try{const t=await S.A.post(e.blockUrl,{block:!0,user:q.dataset.userToBlock});if(!t.ok)throw new S.o(t)}catch(e){return o.innerText="Error",n(),void window.Rollbar.error("Error blocking a user",e)}t.hide(),n()}))}))}const E=document.querySelector(".prompt-forms-container");E&&(e.scrollToPrompt&&(0,L.PA)(E,-100),r().getOrCreateInstance("#promptFormsCarousel",{keyboard:!1,touch:!1}),E.querySelectorAll("form").forEach((e=>{(0,L.pf)({requireVisible:!0},e)}))),(0,y.A)(e);const A=document.querySelector(".body-card-moderation-queue");if(A){A.querySelectorAll('td[data-event="3"]').forEach((e=>{(0,u.A)(e)}));const t=A.querySelector(".moderation-form"),o=t.querySelector(".errorlist"),n=t.querySelector("#id_moderation-deactivate_memorial"),r=t.querySelector("#id_moderation-deactivate_memorial_reason"),s=t.querySelector("#id_moderation-deactivate_memorial_reason_text");n.addEventListener("change",(()=>{r.disabled=!n.checked,r.required=n.checked,s.disabled=!n.checked}));const i=t.querySelector("#id_moderation-unpublish_memorial"),a=t.querySelector("#id_moderation-unpublish_memorial_reason"),c=t.querySelector("#id_moderation-unpublish_memorial_reason_text");i.addEventListener("change",(()=>{a.disabled=!i.checked,a.required=i.checked,c.disabled=!i.checked})),t.addEventListener("submit",(async n=>{if(n.preventDefault(),"_defer_moderation"===n.submitter.name){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name","_defer_moderation"),e.setAttribute("value","1"),t.appendChild(e)}let r;o.replaceChildren(),o.classList.add("d-none");try{const n=await S.A.post(e.moderateMemorialUrl,t);if(r=await n.json(),!n.ok){if(400!==n.status)throw new S.o(n);return(0,L.$I)(t,"cancel-submit-protect"),o.classList.remove("d-none"),void Object.keys(r.errors).forEach((e=>{r.errors[e].forEach((e=>{(0,L.d2)(o,"li",{},e.message)}))}))}}catch{return void(0,L.$I)(t,"cancel-submit-protect")}window.location.replace(r.next)}))}if(document.querySelectorAll(".mason-flex-container").forEach((e=>{new h.A(e).flow()})),!e.memorialIsExample){const e=document.getElementById("subscribe-capture");e&&(window.subscribeCapture=new m.A(e))}(0,L.xy)(),(0,L.Dc)(),(0,w.SR)(),a.A.whenReadyFunctions.push((()=>{const e=[...document.querySelectorAll(".errorlist")].find((e=>(0,L.zN)(e)));if("201"===s.get("flow")&&!e){const e=document.querySelector(".deceased-photo-collage-container");if("none"!==window.getComputedStyle(e).display){let t=0;const o=document.querySelector(".secondary-nav-public");o&&(t=-o.offsetHeight);const n=e.querySelector(".collage-main-photo");t+=n.offsetHeight/2,(0,L.PA)(n,t)}}}))}},561:function(e,t,o){o.d(t,{A:function(){return s}});var n=o(0),r=o(5189);function s(){document.querySelectorAll(".g-recaptcha-button-submit").forEach((e=>{e.dataset.recaptchaInitialized||(e.addEventListener("click",(()=>{window.grecaptcha.execute(n.A.reCAPTCHASiteKey,{action:"submit"}).then((t=>{const o=e.closest("form");o.querySelector('input[name="g-recaptcha-response"]').value=t,o.checkValidity()&&(o.getAttribute("hx-post")?(0,r.$I)(o,"hx-recaptcha-submit"):o.requestSubmit())}))})),e.setAttribute("data-recaptcha-initialized","1"))})),document.querySelectorAll(".g-recaptcha-form").forEach((e=>{e.dataset.recaptchaInitialized||(e.addEventListener("submit",(t=>{t.stopPropagation(),t.preventDefault(),window.grecaptcha.execute(n.A.reCAPTCHASiteKey,{action:"submit"}).then((t=>{e.querySelector('input[name="g-recaptcha-response"]').value=t,(e.hasAttribute("novalidate")||e.checkValidity())&&(e.getAttribute("hx-post")?(0,r.$I)(e,"hx-recaptcha-submit"):e.submit())}))})),e.setAttribute("data-recaptcha-initialized","1"))}))}},2904:function(e,t,o){function n(e,t,o=!1,n=null,r=null){let s;n?s=n:(s=document.createElement("span"),s.classList.add("character-limit"),o?e.after(s):e.before(s));const i=Math.floor(t/4),a=Math.floor(t/10),c=e=>{const o=e.target,n=t-o.value.length;s.innerText=r?r(n):`${n}`,n<=a?(s.classList.add("red"),s.classList.remove("orange")):n<=i?(s.classList.add("orange"),s.classList.remove("red")):(s.classList.remove("red"),s.classList.remove("orange"))};e.addEventListener("input",c),c({target:e})}o.d(t,{A:function(){return n}})},3285:function(e,t,o){o.d(t,{k:function(){return m},x:function(){return u}});var n=o(5858),r=o.n(n),s=o(5189);const i=e=>!!e&&0===e.getBoundingClientRect().left,a=e=>!!e&&e.getBoundingClientRect().right===(window.innerWidth||document.documentElement.clientWidth),c=(e,t)=>{const o=parseFloat(window.getComputedStyle(e).left.replace("px",""))+t;e.style.left=`${o}px`};function l(e){[...e.parentNode.children].filter((t=>e!==t)).forEach((e=>{e.classList.remove("current-page")})),e.classList.add("current-page")}class d{constructor(e,t){this.tabContainer=e,this.leftCaret=this.tabContainer.querySelector(".more-link-left"),this.rightCaret=this.tabContainer.querySelector(".more-link-right"),this.navLinks=this.tabContainer.querySelectorAll(".nav-tab-link:not(.nav-more-link)"),this.firstLink=[...this.navLinks].shift(),this.lastLink=[...this.navLinks].pop(),this.navLinkWidth=this.firstLink.getBoundingClientRect().width,this.onSinglePage=t,this.navLinks.length>4&&(this.positionNav(),this.toggleCarets(),this.leftCaret&&this.leftCaret.addEventListener("click",(()=>{this.leftScroll()})),this.rightCaret&&this.rightCaret.addEventListener("click",(()=>{this.rightScroll()}))),this.isStorageAvailable=(0,s.VS)("sessionStorage"),this.tabContainer.addEventListener("transitionend",(()=>{this.toggleCarets()}))}toggleLeftCaret(){this.leftCaret&&this.leftCaret.classList.toggle("d-none",this.firstLink&&(0,s.cH)(this.firstLink,!0,!1))}toggleRightCaret(){this.rightCaret&&this.rightCaret.classList.toggle("d-none",this.lastLink&&(0,s.cH)(this.lastLink,!0,!1))}toggleCarets(){this.toggleLeftCaret(),this.toggleRightCaret()}saveNavPosition(){this.onSinglePage||this.isStorageAvailable&&sessionStorage.setItem("firstLinkPosition",(0,s.DY)(this.firstLink).left)}positionNav(){let e;if(this.onSinglePage?(this.isStorageAvailable&&sessionStorage.clear(),e=null):this.isStorageAvailable&&(e=sessionStorage.getItem("firstLinkPosition")),e)this.navLinks.forEach((t=>{c(t,parseFloat(e.replace("px","")))}));else{const e=[...this.navLinks].find((e=>e.classList.contains("current-page")));if(!e)return void this.navLinks.forEach((e=>{c(e,0)}));const t=e.getBoundingClientRect();let o=Math.min(window.innerWidth,document.documentElement.clientWidth),n=0;e!==this.lastLink&&(o-=this.navLinkWidth),e!==this.firstLink&&(n+=this.navLinkWidth);const r=t.right>=o,s=t.left<n;if(r){const e=t.right-o;this.navLinks.forEach((t=>{c(t,-parseFloat(e))}))}else if(s){const e=t.left+n;this.navLinks.forEach((t=>{c(t,parseFloat(e))}))}}this.toggleCarets()}leftScroll(){this.firstLink&&(0,s.cH)(this.firstLink,!0,!1)?this.leftCaret&&this.leftCaret.classList.add("d-none"):i(this.firstLink)||this.navLinks.forEach((e=>{c(e,2*this.navLinkWidth),this.saveNavPosition()}))}rightScroll(){this.lastLink&&(0,s.cH)(this.lastLink,!0,!1)?this.rightCaret&&this.rightCaret.classList.add("d-none"):a(this.lastLink)||this.navLinks.forEach((e=>{c(e,-2*this.navLinkWidth),this.saveNavPosition()}))}}class u extends d{constructor(e){super(e,!1)}}class m extends d{constructor(e){super(e,!0),this.stickyNavOffset=document.querySelector(".sticky-nav-wrapper").getBoundingClientRect().height,this.navLinks.forEach((e=>e.addEventListener("click",(()=>{this.scrollToSection(e)})))),document.addEventListener("scroll",r()((()=>{this.updateNavTabs()}),32))}scrollToSection(e){const t=e.closest(".nav-tab-link"),o=document.querySelector(`#${t.getAttribute("id")}-header`);l(t),(0,s.PA)(o,-this.stickyNavOffset)}updateNavTabs(){const e=window.scrollY;let t=null;this.navLinks.forEach((o=>{const n=document.querySelector(`#${o.getAttribute("id")}-header`);e>=(0,s.DY)(n).top-this.stickyNavOffset&&(t=o)})),t&&(l(t),this.leftCaret&&this.rightCaret&&(i(t)&&(0,s.zN)(this.leftCaret)||a(t)&&(0,s.zN)(this.rightCaret))&&this.positionNav())}}},7724:function(e,t,o){o.d(t,{A:function(){return r}});var n=o(5189);function r(e){if(e.autoScrollTargets){const t=()=>{Object.keys(e.autoScrollTargets).forEach((t=>{if(window.location.hash===t){const o=document.querySelector(e.autoScrollTargets[t]);o&&(0,n.PA)(o,-20)}}))};window.onhashchange=t,t()}}},8070:function(e,t,o){o.d(t,{F:function(){return c},J:function(){return a}});var n=o(2904),r=o(0);var s=o(1760),i=o(5189);function a(e){const t=document.querySelector(".is-business-toggle"),o=document.querySelector(".business-select"),a=document.querySelector(".business-type-select"),c=document.querySelector(".social-auth"),l=document.querySelector('input[name="welcome"]');e.shouldUseAutocomplete&&((0,s.A)(e),a.required=!1,t.addEventListener("change",(()=>{t.checked?(c.classList.add("d-none"),o.classList.remove("d-none"),a.required=!0):(c.classList.remove("d-none"),o.classList.add("d-none"),(0,i.$I)(o,"clearallinputs"),a.required=!1),l&&(l.value=e.initialWelcomeValue)})),e.businessTypeOpen&&(t.checked=!0,(0,i.$I)(t,"change"))),function(e){const t=document.querySelector(".fb-login-btn"),o=document.querySelector(".fb-login-errorlist"),n=e=>{const t=document.createElement("li");t.textContent=e,o.appendChild(t),o.classList.remove("d-none")};window.fbAsyncInit=()=>{window.FB.init({appId:r.A.facebookAppId,cookie:!0,xfbml:!0,version:r.A.facebookApiVersion}),t.addEventListener("click",(()=>{(()=>{for(o.classList.add("d-none");o.hasChildNodes();)o.removeChild(o.lastChild)})(),window.FB.login((t=>{"connected"===t.status?(t=>{window.FB.api("/me/permissions",(o=>{const r=[];for(let e=0;e<o.data.length;e+=1)"declined"===o.data[e].status&&r.push(o.data[e].permission);if(0===r.length){const o=document.getElementById("facebook-login-form"),n=document.getElementById(e.facebookAccessTokenInputId),r=document.getElementById(e.facebookAccountIdInputId);n.value=t.authResponse.accessToken,r.value=t.authResponse.userID,o.submit()}else n(e.missingEmailMessage)}))})(t):n("An error occurred and we were unable to log you in with Facebook. Please create an account using your email and password.")}),{scope:"public_profile,email"})}))}}(e.facebookLoginForm);const d=document.querySelector(".relationship-type-select > select"),u=document.querySelector(".relationship-other");if(d&&u){d.addEventListener("change",(e=>{const t=e.target.selectedIndex;"other"===e.target.options[t].value?u.classList.remove("d-none"):(u.querySelector("input").value="",u.classList.add("d-none"))}));const e=u.querySelector("input"),t=u.parentNode.querySelector(".relationship-other-over-length-warning");e&&e.classList.contains("enforce-max-length")&&(0,n.A)(e,e.maxLength,!0,u.querySelector(".character-limit"),(e=>(t&&t.classList.toggle("d-none",e>0),`${e}`)))}}function c(){document.querySelectorAll(".passwordless-signup-relationship").forEach((e=>{const t=e.querySelector(".relationship-type-select > select"),o=e.querySelector(".relationship-other");if(t&&o){t.addEventListener("change",(e=>{const t=e.target.selectedIndex;"other"===e.target.options[t].value?o.classList.remove("d-none"):(o.querySelector("input").value="",o.classList.add("d-none"))}));const e=o.querySelector("input"),r=o.parentNode.querySelector(".relationship-other-over-length-warning");e&&e.classList.contains("enforce-max-length")&&(0,n.A)(e,e.maxLength,!0,o.querySelector(".character-limit"),(e=>(r&&r.classList.toggle("d-none",e>0),`${e}`)))}}))}},8457:function(e,t,o){o.d(t,{A:function(){return r}});var n=o(5189);class r{constructor(e,t=!1,o=null){if(this.root=e,!this.root)return;o?this.storage=o:(0,n.VS)("localStorage")&&(this.storage=window.localStorage),this.isMobile=window.innerWidth<768,this.storageKey=this.root.dataset.exitPopupStorageKey,this.sessionKey=this.root.dataset.exitPopupSessionKey,this.eventLabel=this.root.dataset.exitPopupEventLabel||this.storageKey,this.eventCategory=this.root.dataset.exitPopupEventCategory||"exit-popup",this.context=this.root.dataset.exitPopupContext,this.canShow=!1,this.isShowing=!1,this.hasShownInLifecycle=!1;const r=!this.getHasBeenShown()&&!this.root.dataset.exitPopupManualOnly;this.setCanShowListener=()=>{this.canShow=!0,this.removeInteractionListeners()},this.blurListener=()=>{this.canShow&&!this.hasShownInLifecycle&&this.show()},this.isMobile?(r&&(this.mobileScrollHandler=()=>{this.canShow?window.scrollY<10&&this.canShow&&!this.hasShownInLifecycle&&this.show():window.scrollY>.75*window.innerHeight&&(this.canShow=!0)},document.addEventListener("scroll",this.mobileScrollHandler)),t&&r&&setTimeout((()=>{this.hasShownInLifecycle||(this.canShow=!0,this.show())}),10500)):(r&&(this.interactionDelayTimeout=setTimeout(this.setCanShowListener,1e4),document.addEventListener("scroll",this.setCanShowListener),setTimeout((()=>{document.documentElement.addEventListener("mouseleave",(()=>{this.canShow&&!this.hasShownInLifecycle&&this.show()}))}),500),t&&setTimeout((()=>{this.hasShownInLifecycle||(this.canShow=!0,this.show())}),10500)),e.dataset.exitPopupDisableBackgroundDismiss||this.root.addEventListener("mousedown",(e=>{e.target===this.root&&(e.stopPropagation(),this.hide())}))),r&&window.addEventListener("blur",this.blurListener),this.root.querySelectorAll('[data-exit-popup-conversion="true"]').forEach((e=>{e.addEventListener("click",(()=>{this.reportEvent("conversion")}))})),this.root.querySelectorAll(".close").forEach((e=>{e.addEventListener("click",(()=>{this.hide()}))})),document.body.addEventListener("elep:show",(()=>{this.show()})),document.body.addEventListener("elep:hide",(()=>{this.hide()})),document.body.addEventListener("elep:disable",(()=>{this.canShow=!1})),document.querySelectorAll("input,select").forEach((e=>{e.addEventListener("focus",(()=>{this.canShow=!1}))}))}removeInteractionListeners(){this.setCanShowListener&&document.removeEventListener("scroll",this.setCanShowListener),this.blurListener&&document.removeEventListener("blur",this.blurListener),this.mobileScrollHandler&&document.removeEventListener("scroll",this.mobileScrollHandler),this.interactionDelayTimeout&&clearTimeout(this.interactionDelayTimeout)}getHasBeenShown(){let e=!1;if(this.storage){if(this.sessionKey){const t=Math.floor(Date.now()/1e3),o=this.storage.getItem(this.sessionKey);if(o)try{const n=JSON.parse(o);"number"==typeof n&&t<n&&(e=!0)}catch{e=!1}}return!!this.storageKey&&(this.storage.getItem(this.storageKey)||e)}return e}setHasBeenShown(){if(this.storage&&(this.storageKey&&this.storage.setItem(this.storageKey,"1"),this.sessionKey)){const e=Math.floor(Date.now()/1e3)+604800;this.storage.setItem(this.sessionKey,e)}}show(e=!1,t=!0){(this.canShow&&!this.hasShownInLifecycle||e)&&!this.isShowing&&(this.isShowing=!0,this.hasShownInLifecycle=!0,this.root.classList.remove("d-none"),this.reportEvent("display"),this.setHasBeenShown(),t&&(0,n.$I)(document.body,"elep:shown"),this.removeInteractionListeners())}hide(){this.isShowing&&(this.isShowing=!1,this.canShow=!1,this.root.classList.add("d-none"),this.reportEvent("hide"),(0,n.$I)(document.body,"elep:hidden"))}reportEvent(e){(0,n.Wl)(`${this.eventLabel}:${this.context}`,this.eventCategory,e)}}},9095:function(e,t,o){o.d(t,{A:function(){return n}});class n{constructor(e){this.container=e,this.cols=this.container.dataset.cols?parseInt(this.container.dataset.cols,10):2,this.mobileCols=this.container.dataset.mobileCols?parseInt(this.container.dataset.mobileCols,10):1,this.currentCols=0,window.addEventListener("resize",(()=>{this.flow()})),this.container.addEventListener("mason:reflow",(()=>{this.flow()}))}static isMobile(){return window.innerWidth<768}flow(){const e=this.constructor.isMobile()?this.mobileCols:this.cols;if(this.currentCols===e)return;const t=Array.from(this.container.children);let o="";if(t.length>1&&e>1){const n=t.reduce(((e,t)=>e+t.offsetHeight+10),0);o=(n+30)/e;let r=0,s=0,i=0;t.forEach((t=>{const n=r-s,a=n+t.offsetHeight+10-n;o<n+a/2&&(o=r-s+(a-20),i<e-1&&(s=r,r+=a-20,i+=1)),r+=t.offsetHeight+10}))}this.container.style.maxHeight=o?`${o}px`:""}}}},function(e){e.O(0,[8692,807,6438,523,6189,3004,6252,4927,7997,697,6055,9114],(function(){return e(e.s=348)}));var t=e.O();(eljs=void 0===eljs?{}:eljs).memorialsPublic=t}]);
//# sourceMappingURL=memorialsPublic.js.f10bc885d968.map