"use strict";(self.webpackChunkeljs=self.webpackChunkeljs||[]).push([[7997],{1760:function(e,t,s){s.d(t,{A:function(){return d}});var n=s(8647),o=s.n(n),r=s(9241),c=s(5189);function d(e){const t=[e.WELCOME_FUNERAL_HOME_EMPLOYEE,e.WELCOME_CEMETERY_EMPLOYEE,e.WELCOME_CHARITY_EMPLOYEE,e.WELCOME_HOSPICE_EMPLOYEE,e.WELCOME_DONATION_ORG_EMPLOYEE,e.WELCOME_DEATH_DOULA_EMPLOYEE,e.WELCOME_EVENT_SPACE_EMPLOYEE,e.WELCOME_VENDOR_EMPLOYEE],s=document.querySelector(".fhep-form"),n=document.getElementById("_fhep"),d=document.getElementById(e.funeralHomeSearch.businessJobTitleInputId),a=document.getElementById(e.funeralHomeSearch.businessIdentifierInputId),l=document.getElementById(e.funeralHomeSearch.businessStrInputId),i=document.querySelector(".cep-form"),u=document.getElementById("_cep"),m=document.getElementById(e.cemeterySearch.businessIdentifierInputId),E=document.getElementById(e.cemeterySearch.businessStrInputId),y=document.getElementById(e.cemeterySearch.businessJobTitleInputId),p=document.querySelector(".hep-form"),S=document.getElementById("_hep"),L=document.getElementById(e.hospiceSearch.businessIdentifierInputId),h=document.getElementById(e.hospiceSearch.businessStrInputId),I=document.getElementById(e.hospiceSearch.businessJobTitleInputId),f=document.querySelector(".doep-form"),v=document.getElementById("_doep"),g=document.getElementById(e.donationOrgSearch.businessIdentifierInputId),q=document.getElementById(e.donationOrgSearch.businessStrInputId),b=document.getElementById(e.donationOrgSearch.businessJobTitleInputId),O=document.querySelector(".ddep-form"),_=document.getElementById("_ddep"),C=document.getElementById(e.deathDoulaSearch.businessIdentifierInputId),M=document.getElementById(e.deathDoulaSearch.businessStrInputId),w=document.getElementById(e.deathDoulaSearch.businessJobTitleInputId),A=document.querySelector(".esep-form"),B=document.getElementById("_esep"),T=document.getElementById(e.eventSpaceSearch.businessIdentifierInputId),k=document.getElementById(e.eventSpaceSearch.businessStrInputId),x=document.getElementById(e.eventSpaceSearch.businessJobTitleInputId),P=document.querySelector(".chep-form"),Y=document.getElementById("_chep"),D=document.getElementById(e.charitySearch.businessIdentifierInputId),W=document.getElementById(e.charitySearch.businessStrInputId),H=document.getElementById(e.charitySearch.businessJobTitleInputId),N=document.querySelector(".vep-form"),R=document.getElementById("_vep"),U=document.getElementById(e.vendorSearch.businessIdentifierInputId),$=document.getElementById(e.vendorSearch.businessStrInputId),J=document.getElementById(e.vendorSearch.businessJobTitleInputId),j=document.querySelector('input[name="welcome"]'),V=document.querySelectorAll(".more-business-details"),K=document.querySelectorAll(".more-business-details input");(0,r.A)(e.funeralHomeSearch),(0,r.A)(e.cemeterySearch),(0,r.A)(e.hospiceSearch),(0,r.A)(e.donationOrgSearch),(0,r.A)(e.deathDoulaSearch),(0,r.A)(e.eventSpaceSearch),(0,r.A)(e.charitySearch),(0,r.A)(e.vendorSearch);const F=document.querySelector(".business-forms-container"),G=o().getOrCreateInstance(F,{toggle:!1}),X=document.querySelectorAll(".business-form"),Z=document.querySelector(".business-type-select");[e.funeralHomeSearch,e.cemeterySearch,e.hospiceSearch,e.donationOrgSearch,e.deathDoulaSearch,e.eventSpaceSearch,e.charitySearch,e.vendorSearch].forEach((e=>{const t=document.getElementById(e.businessIdentifierInputId),s=document.getElementById(e.moreDetailsRequiredInputId),n=o().getOrCreateInstance(t.closest(".business-form").querySelector(".more-business-details"),{toggle:!1});e.initialAutocompleteData.created&&n.show(),t.tomselect.on("change",(()=>{const e=t.tomselect.getValue();if(!e)return;const o=t.tomselect.options[e];o&&(!0===o.created?(n.show(),s.required=!0):(n.hide(),s.required=!1))}))})),document.querySelector(".business-select").addEventListener("clearallinputs",(()=>{Z.value=null,(0,c.$I)(Z,"change",{skipClear:!1})}));const z=o=>{const r={"funeral-home":[s,n,e.WELCOME_FUNERAL_HOME_EMPLOYEE],cemetery:[i,u,e.WELCOME_CEMETERY_EMPLOYEE],hospice:[p,S,e.WELCOME_HOSPICE_EMPLOYEE],"donation-org":[f,v,e.WELCOME_DONATION_ORG_EMPLOYEE],"death-doula":[O,_,e.WELCOME_DEATH_DOULA_EMPLOYEE],"event-space":[A,B,e.WELCOME_EVENT_SPACE_EMPLOYEE],charity:[P,Y,e.WELCOME_CHARITY_EMPLOYEE],vendor:[N,R,e.WELCOME_VENDOR_EMPLOYEE]}[o];if(r){const[e,s,n]=r;e.classList.remove("d-none"),e.parentNode.querySelectorAll(".business-form").forEach((t=>{t!==e&&(t.classList.add("d-none"),t.querySelector(".chosen-form").value=!1)})),s.value=!0,G.show(),c=n,j&&t.includes(c)&&(j.value=c)}else G.hide(),X.forEach((e=>e.classList.add("d-none")));var c};Z.addEventListener("change",(t=>{const s=t.payload;var n;s&&s.skipClear||(n=e.skipClearingJobTitles,m.tomselect.clear(),E.value="",D.tomselect.clear(),W.value="",a.tomselect.clear(),l.value="",L.tomselect.clear(),h.value="",g.tomselect.clear(),q.value="",C.tomselect.clear(),M.value="",T.tomselect.clear(),k.value="",U.tomselect.clear(),$.value="",V.forEach((e=>{o().getOrCreateInstance(e).hide()})),K.value="",n||(y.value="",H.value="",d.value="",I.value="",b.value="",w.value="",x.value="",J.value="")),z(Z.value)})),z(e.businessTypeOpen)}},2448:function(e,t,s){function n(e){const t=e.querySelector(".read-more-details"),s=e.querySelector(".read-more");t&&s&&(e.querySelector(".read-more-link").addEventListener("click",(()=>{s.classList.add("d-none"),t.classList.remove("d-none")})),e.querySelector(".read-less-link").addEventListener("click",(()=>{t.classList.add("d-none"),s.classList.remove("d-none")})))}s.d(t,{A:function(){return n}})},3706:function(e,t,s){s.d(t,{B$:function(){return a},KZ:function(){return u},M1:function(){return l},T3:function(){return i},rm:function(){return m}});var n=s(8647),o=s.n(n),r=s(2448),c=s(5189),d=s(2020);function a(){document.querySelectorAll(".user-post .expandable").forEach((e=>{(0,r.A)(e)}))}function l(e){const t=e.querySelector("textarea.answer-text");t&&(t.addEventListener("focus",(()=>{const e=t.parentElement.querySelector(".collapsed-submit-wrapper");e&&o().getOrCreateInstance(e,{toggle:!1}).show(),t.classList.add("expanded-text")})),t.addEventListener("blur",(()=>{if(!t.value){const e=t.parentElement.querySelector(".collapsed-submit-wrapper");e&&o().getOrCreateInstance(e,{toggle:!1}).hide(),t.classList.remove("expanded-text")}}))),e.addEventListener("submit",(()=>{e.querySelectorAll(".btn").forEach((e=>{e.setAttribute("disabled","disabled")}))}))}function i(){a(),document.querySelectorAll(".user-post-form").forEach((e=>{l(e)}))}function u(e,t){const s=e.querySelector(".main-edit-controls");let n=e.querySelector(".edit-user-post");const r=e.querySelector(".edit-confirmation"),a=e.querySelector(".user-post-edit-field"),l=e.querySelector(".confirm-edit-user-post"),i=e.querySelector(".toggle-dropdown-edit-menu"),u=e.querySelector("textarea.answer-text");n&&n.closest(".editable-user-post")!==e&&(n=null);const m=async(t=!1)=>{s&&s.classList.remove("d-none"),r&&r.classList.add("d-none");const n=e.querySelector(".delete-confirmation");n&&n.classList.add("d-none");const o=e.querySelector(".user-post-text-container");o&&o.classList.remove("d-none");const d=e.querySelector(".user-post-text");if(d&&d.classList.remove("d-none"),a&&a.classList.add("d-none"),i.classList.remove("d-none"),e.classList.contains("post")?(e.querySelector(".edit-post").classList.add("d-none"),e.querySelector(".post-actions").classList.remove("d-none"),e.querySelector(".post-content > p").classList.remove("d-none")):a&&a.classList.add("d-none"),t){const t=e.querySelector(".saved-message");t&&(t.classList.remove("d-none"),await(0,c.bE)(t,"fadeIn","200ms"),(0,c.Xn)(t,2e3))}};async function E(t){t.target.dataset.clicked=!0;const s=(0,c.SE)(t.target),n=e.classList.contains("post"),o=n?e.querySelector("textarea"):a,r=o.value,i=e.querySelector(".user-post-text"),u=e.querySelector(".edit-error-message-blank-submission"),E=e.querySelector(".edit-error-message-general"),y=e.querySelector(".edit-error-message-specific");if(r){let e;try{u.classList.add("d-none"),E.classList.add("d-none"),y.classList.add("d-none"),y.replaceChildren();const t=await d.A.post(l.dataset.editUrl,{text:r});if(!t.ok)throw new d.o(t);e=await t.json()}catch{return E&&E.classList.remove("d-none"),m(),void(s&&s())}y&&e&&e.errors?(y.classList.remove("d-none"),Object.values(e.errors).forEach((e=>{const t=document.createElement("li");t.innerHTML=e,y.appendChild(t)})),m()):(i.innerText=`${r}`,a&&(a.value=`${r}`),m(!0)),s&&s()}else u&&u.classList.remove("d-none"),n&&o&&(o.value=i.innerText),m()}u&&u.addEventListener("keydown",(e=>!(13===e.keyCode&&!e.metaKey&&(u.closest("form.user-post-form").submit(),1)))),n&&n.addEventListener("click",(()=>{if(e.classList.contains("memory")){const s=`memory-uuid=${e.getAttribute("id")}`;window.location.href=`${t.memoriesUrl}?${s}`}else if(e.classList.contains("question")){const s=`question-uuid=${e.getAttribute("id")}`;window.location.href=`${t.questionsUrl}?${s}`}else if(e.classList.contains("comment")){s&&s.classList.add("d-none"),r&&r.classList.remove("d-none"),i&&i.classList.add("d-none"),a&&a.classList.remove("d-none");const t=e.querySelector(".user-post-text-container");t&&t.classList.add("d-none");const n=e.querySelector(".user-post-text");n&&n.classList.add("d-none");const o=e.querySelector(".errorlist");o&&o.classList.add("d-none")}else if(e.classList.contains("post")){const t=e.querySelector(".post-actions");t&&t.classList.add("d-none");const s=e.querySelector(".post-content > p");s&&s.classList.add("d-none");const n=e.querySelector(".edit-post");n&&n.classList.remove("d-none"),e.querySelector(".errorlist")&&t.classList.add("d-none"),r.classList.remove("d-none"),i.classList.add("d-none")}else if(e.classList.contains("review-response")){s.classList.add("d-none"),r.classList.remove("d-none"),i.classList.add("d-none"),a&&a.classList.remove("d-none");const t=e.querySelector(".user-post-text-container");t&&t.classList.add("d-none");const n=e.querySelector(".user-post-text");n&&n.classList.add("d-none");const o=e.querySelector(".errorlist");o&&o.classList.add("d-none")}else if(e.classList.contains("question-container")){const t=e.parentElement.querySelector(".edit-question-form-container");t&&t.classList.remove("d-none")}else if(e.classList.contains("answer-container")){const t=e.querySelector(".edit-answer-form-container");t&&t.classList.remove("d-none")}})),l&&l.addEventListener("click",E),a&&a.addEventListener("keydown",(e=>!(13===e.keyCode&&!e.metaKey&&(E(e),1))));const y=e.querySelector(".cancel-edit-user-post");y&&y.addEventListener("click",(()=>{m()}));const p=e.querySelector(".confirm-delete-user-post");p&&(e.addEventListener("hidden.bs.collapse",(()=>{const t=e.closest(".user-post-container");if(t){const s=t.querySelector(".user-post-section-header");p.remove(),e.remove(),t.querySelectorAll(".editable-user-post").length||s&&s.classList.add("d-none")}})),p.addEventListener("click",(async()=>{let t;try{const e=await d.A.delete(p.dataset.deleteUrl);if(!e.ok)throw new d.o(e);t=await e.json()}catch{const t=e.querySelector(".edit-error-message-general");t&&t.classList.remove("d-none"),m()}if(t){if(e.classList.contains("post")){const t=e.querySelector(".poster-name");t&&(t.innerText="(Deleted)");const s=e.querySelector(".user-post-text");if(s){for(;s.firstChild;)s.removeChild(s.firstChild);const e=document.createElement("span");e.classList.add("deleted"),e.innerText="This post has been deleted.",s.appendChild(e)}const n=e.querySelector(".user-post-edit-controls");n&&n.remove()}else o().getOrCreateInstance(e,{toggle:!1}).hide();if(window.showBlockUserModal){const{userSlug:e,userName:t}=p.dataset;e&&t&&window.showBlockUserModal(e,t)}const{redirectUrl:s}=t;s&&(window.location.href=s)}})))}function m(e){document.querySelectorAll(".editable-user-post").forEach((t=>{u(t,e)}))}}}]);
//# sourceMappingURL=users~places~memorialsPublic.js.1bf812e96671.map